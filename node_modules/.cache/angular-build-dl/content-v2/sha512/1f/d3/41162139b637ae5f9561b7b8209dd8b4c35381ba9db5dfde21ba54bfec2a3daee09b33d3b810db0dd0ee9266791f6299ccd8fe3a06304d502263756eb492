{"version":3,"sources":["webpack:///src/app/btc/btc.page.html","webpack:///src/app/btc/btc-routing.module.ts","webpack:///src/app/btc/btc.module.ts","webpack:///src/app/btc/btc.page.scss","webpack:///src/app/btc/btc.page.ts"],"names":["routes","path","component","BtcPageRoutingModule","imports","forChild","exports","BtcPageModule","declarations","BtcPage","storage","alertCtrl","loaded","predictions","rendered","hist_time","hist_price","pred_price","pred_time","console","log","Promise","resolve","get","then","getprice","create","header","message","inputs","type","name","buttons","text","handler","data","createPrediction","price","cssClass","alert","present","options","hour12","hour","day","month","now","Date","toLocaleDateString","time","getTime","push","parseInt","day_month","timestamp","save","set","load","get_hist_price","get_chart","setInterval","lineChart","lineCanvas","nativeElement","labels","datasets","label","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","spanGaps","datalabels","color","align","display","borderWidth","maintainAspectRatio","responsive","title","scales","xAxes","distribution","ticks","fontSize","maxTicksLimit","scaleLabel","labelString","yAxes","min","Math","floor","max","ceil","gridLines","legend","url","a","res","i","length","j","includes","indexOf","toLocaleString","selector","template"],"mappings":"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","file":"btc-btc-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-title style= \\\"position: absolute; \\\">BITCOIN</ion-title>\\n\\n    <ion-buttons slot=\\\"start\\\" display=\\\"inline-block\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button expand=\\\"block\\\"  color=\\\"tertiary\\\" shape=\\\"round\\\" (click)=\\\"addPrediction()\\\">\\n        <ion-text color=\\\"dark\\\"> New </ion-text>\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"add\\\" style='color:black'  ></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-card style=\\\"background-color:#259ACB\\\"> \\n    <ion-card-title style=\\\"text-align:center; margin-top:4px; color:white\\\">Real-time</ion-card-title>\\n    <ion-card-content style='color:white'>\\n      <div *ngIf=\\\"this.loaded =='no'\\\">No connection</div> \\n      <div *ngIf=\\\"this.loaded =='yes'\\\">\\n      <span>Current price ($) = </span><span class=\\\"price\\\" [innerHTML]=\\\"price\\\"></span>\\n      <span><br>Current time  = </span><span class=\\\"time\\\" [innerHTML]=\\\"time\\\"></span>\\n    </div>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <div *ngIf=\\\"this.loaded =='init'\\\">Rendering</div>\\n  <ion-card *ngIf= \\\"this.rendered  =='rendered'\\\" style=\\\" height: 40vh;\\\">\\n    \\n    <ion-card-content style=\\\"height:40vh;\\\">\\n      <canvas #lineCanvas></canvas>\\n    </ion-card-content>\\n  </ion-card>\\n  \\n</ion-content>  \";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BtcPage } from './btc.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BtcPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BtcPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BtcPageRoutingModule } from './btc-routing.module';\n\nimport { BtcPage } from './btc.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    BtcPageRoutingModule\n  ],\n  declarations: [BtcPage]\n})\nexport class BtcPageModule {}\n","export default \"ion-menu-button {\\n  color: var(--ion-color-primary);\\n}\\n\\nion-toolbar, ion-header {\\n  --min-height: 60px;\\n}\\n\\nion-title, ion-toolbar, ion-header {\\n  font-size: 120%;\\n  color: white;\\n}\\n\\nion-content {\\n  background-color: grey;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYnRjL0M6XFxVc2Vyc1xcTWF4IEJvc2NoXFx0aGVzaXMvc3JjXFxhcHBcXGJ0Y1xcYnRjLnBhZ2Uuc2NzcyIsInNyYy9hcHAvYnRjL2J0Yy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwrQkFBQTtBQ0NKOztBRENFO0VBQ0Usa0JBQUE7QUNFSjs7QURBRztFQUNDLGVBQUE7RUFDQSxZQUFBO0FDR0o7O0FEQUc7RUFBYSxzQkFBQTtBQ0loQiIsImZpbGUiOiJzcmMvYXBwL2J0Yy9idGMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLW1lbnUtYnV0dG9uIHtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XHJcbiAgfVxyXG4gIGlvbi10b29sYmFyLCBpb24taGVhZGVyIHtcclxuICAgIC0tbWluLWhlaWdodDogNjBweDtcclxuICAgfVxyXG4gICBpb24tdGl0bGUsIGlvbi10b29sYmFyLCBpb24taGVhZGVyIHtcclxuICAgIGZvbnQtc2l6ZTogMTIwJTtcclxuICAgIGNvbG9yOndoaXRlO1xyXG4gICB9XHJcbiAgIFxyXG4gICBpb24tY29udGVudCB7YmFja2dyb3VuZC1jb2xvcjogZ3JleTt9IiwiaW9uLW1lbnUtYnV0dG9uIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbn1cblxuaW9uLXRvb2xiYXIsIGlvbi1oZWFkZXIge1xuICAtLW1pbi1oZWlnaHQ6IDYwcHg7XG59XG5cbmlvbi10aXRsZSwgaW9uLXRvb2xiYXIsIGlvbi1oZWFkZXIge1xuICBmb250LXNpemU6IDEyMCU7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuaW9uLWNvbnRlbnQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmV5O1xufSJdfQ== */\";","import { Component, OnInit, ViewChild, ElementRef } from \"@angular/core\";\nimport { Chart } from \"chart.js\";\nimport axios from 'axios'\nimport { Storage } from '@ionic/storage';\nimport { findLast } from '@angular/compiler/src/directive_resolver';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-btc',\n  templateUrl: './btc.page.html',\n  styleUrls: ['./btc.page.scss'],\n})\nexport class BtcPage implements OnInit {\n\n  @ViewChild(\"lineCanvas\") lineCanvas: any;\n  private lineChart: Chart;\n  public loaded: string = 'init';\n  public predictions: Predictions[] = [];\n  public rendered: string = 'rendered';\ntime:any;\nprice:number;\nhist_time:any =[]\nhist_price:any =[]\npred_price:any =[]\npred_time:any =[]\n\n\n\nconstructor(private storage: Storage, private alertCtrl: AlertController \n  ) { }\n    load(): Promise<boolean> {\n      console.log('loading')\n  \n      return new Promise((resolve) => {\n  \n        this.storage.get('predictions').then((predictions) => {\n  \n          if(predictions != null){\n            this.predictions = predictions;\n           \n            \n            \n            \n          }\n  \n          resolve(true);\n  \n        });\n  \n      });\n    }\n  ngOnInit() {  \n    \n     \n    \n    \n     this.getprice();\n    \n    \n    \n\n\n  }\n  addPrediction(){\n\n    this.alertCtrl.create({\n      header: 'Adding a new Prediction',\n      message: 'What is the Prediction?',\n      \n      inputs: [\n        {\n          type: 'number',\n          name: 'price'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancel'\n        },\n        {\n          text: 'Save',\n          handler: (data) => {\n            this.createPrediction(data.price);\n          }\n        }\n      ], \n      cssClass: \"alerting\",\n\n      \n    }).then((alert) => {\n      alert.present();\n    });\n  \n  }\n  \ncreatePrediction(price): void {\n    \n  var options = {\n    hour12: false,hour:'numeric',day: 'numeric',month: 'numeric',\n}\nvar now = new Date().toLocaleDateString('en', options)\nvar time = new Date().getTime()\n  this.predictions.push({\n    price: parseInt(price),\n    day_month: now,\n    timestamp: time,\n    type: \"Btc\"\n  });\n  console.log(this.predictions)\n  this.save();\n  \n}\nasync save() {\n  this.hist_time =[]\n  this.hist_price =[]\n  this.pred_price =[]\n  this.pred_time =[]\n await this.storage.set('predictions', this.predictions);\n  await this.load();\n  \nawait this.get_hist_price();\nawait this.get_chart();\n}\n\n  async get_chart(){\n    setInterval(async() =>{ await this.getprice()},60000);    \n\n\n    this.lineChart = new Chart(this.lineCanvas.nativeElement, {\n      type: \"line\",\n      data: {\n        labels: this.hist_time,\n       \n        datasets: [\n          {\n            label: \"Historic price\",\n            fill: false,\n            lineTension: 0.1,\n            backgroundColor: \"rgba(75,192,192,0.4)\",\n            borderColor: \"rgba(75,192,192,1)\",\n            borderCapStyle: \"butt\",\n            borderDash: [],\n            borderDashOffset: 0.0,\n            borderJoinStyle: \"miter\",\n            pointBorderColor: \"rgba(75,192,192,1)\",\n            pointBackgroundColor: \"#fff\",\n            pointBorderWidth: 1,\n            pointHoverRadius: 5,\n            pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\n            pointHoverBorderColor: \"rgba(220,220,220,1)\",\n            pointHoverBorderWidth: 2,\n            pointRadius: 1,\n            pointHitRadius: 10,\n            data: this.hist_price,\n            spanGaps: false,\n            \n            datalabels: {\n              color: 'black',\n              align: 'end',\n              display: false\n\n              \n              \t\n          }\n          },{\n            label: \"Prediction\",\n            data: this.pred_price,\n            borderWidth: 2,\n            backgroundColor: \"red\",\n            borderColor: \"red\",\n            pointBackgroundColor: \"red\",\n            pointBorderColor: \"red\",\n            pointHoverBackgroundColor: \"red\",\n            pointHoverBorderColor: \"red\",\n            type: 'scatter',\n            datalabels: {\n              color: 'black',\n              align: 'end',\n              display: false\n              \n              \t\n          }\n         }]\n      },options: {  maintainAspectRatio: false, \n        responsive: true, \n        title: {\n          display: true,\n          text: 'Bitcoin price ($) in 2020'\n      },\n        scales: {\n          xAxes: [{\n              distribution : 'series',\n              display: true,\n              ticks: {fontSize: 10,\n                maxTicksLimit: 4.1,\n                    },\n              scaleLabel: {\n                  display: true,\n                  labelString: \"Date\",\n              }\n          }]\n          ,\n          yAxes: [{\n            ticks: {\n                min: Math.floor((Math.min(...this.hist_price))/1000)*1000,\n                max: Math.ceil(Math.max((Math.max(...this.hist_price)),(Math.max(...this.pred_price)))/1000)*1000,\n               \n          maxTicksLimit: ((Math.ceil(Math.max((Math.max(...this.hist_price)),(Math.max(...this.pred_price)))/1000))-(Math.floor((Math.min(...this.hist_price))))/1000)+2,\n          \n            },\n            gridLines: {\n              borderDash: [8, 4],\n              color: \"#348632\"\n          }\n        }]\n      },    \n        legend: {\n          display: false\n        }\n      }\n      \n    });\n\n  }\n  // async ionViewWillEnter (){\n  // }\n async ionViewDidEnter () {\n  await this.load();\n  await this.get_hist_price();\n  await this.get_chart()\n}\n\nasync get_hist_price()\n{\n  \n  var url = \"https://api.binance.com/api/v1/klines?symbol=BTCUSDT&interval=1h\";\n  const res = await axios.get(url)\n  \n  var i;\n  var options = {\n    hour12: false,hour:'numeric',day: 'numeric',month: 'numeric',\n};\nfor (i = 0; i < res.data.length; i++) {\n  this.hist_time.push(new Date(res.data[i][0]).toLocaleDateString('en', options));\n  this.hist_price.push(Math.floor(res.data[i][1]))\n  this.pred_price.push(0)\n  // this.pred_time.push(new Date(res.data[i][0]).toLocaleDateString('en', options))\n\n}\nvar j;\n\nfor (j = 0; j < this.predictions.length; j++) {\n  \n  if (this.hist_time.includes(this.predictions[j].day_month)){\n    \n    this.pred_price[(this.hist_time.indexOf(this.predictions[j].day_month))] = this.predictions[j].price\n    console.log(this.pred_price)\n\n}}\n}\n\nasync getprice()\n{\n  try{\n\n  var url = \"https://api.binance.com/api/v1/klines?symbol=BTCUSDT&interval=1m\";\n  const res = await axios.get(url)\n \n\n  \n  if (res.data.length != 0){\n    this.loaded = 'yes'}\n    else {this.loaded='no'}\n    console.log(this.loaded)\n  this.time = new Date(res.data[res.data.length-1][0]).toLocaleString()\n\n  this.price = Math.floor(res.data[res.data.length-1][1])\n  }\n  catch {this.loaded = 'no'}\n  \n}\n}\nexport interface Predictions {\n  price: number;\n  day_month: any;\n  timestamp: number;\n  type: string;\n  \n}"]}