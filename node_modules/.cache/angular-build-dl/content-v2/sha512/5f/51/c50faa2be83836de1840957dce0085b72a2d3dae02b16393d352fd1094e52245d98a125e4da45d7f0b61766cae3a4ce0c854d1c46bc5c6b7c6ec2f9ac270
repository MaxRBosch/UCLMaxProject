(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["eth-eth-module"],{

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/eth/eth.page.html":
/*!*************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/eth/eth.page.html ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<ion-header [translucent]=\"true\">\n  <ion-toolbar mode=\"ios\">\n    <ion-title style= \"position: absolute; \">ETHEREUM</ion-title>\n\n    <ion-buttons slot=\"start\" display=\"inline-block\">\n      <ion-menu-button></ion-menu-button>\n    </ion-buttons>\n\n    <ion-buttons slot=\"end\">\n      <ion-button expand=\"block\"  color=\"tertiary\" shape=\"round\" (click)=\"addPrediction()\">\n        <ion-text color=\"dark\"> New </ion-text>\n        <ion-icon slot=\"icon-only\" name=\"add\" style='color:black'  ></ion-icon>\n      </ion-button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n\n\n<ion-content [fullscreen]=\"true\">\n  <ion-card>\n    <ion-card-title style=\"position:center; display:inline-block\">Real-time</ion-card-title>\n    <ion-card-content>\n      <div *ngIf=\"this.loaded =='no'\">No connection</div> \n      <div *ngIf=\"this.loaded =='yes'\">\n      <span>Current price ($) = </span><span class=\"price\" [innerHTML]=\"price\"></span>\n      <span><br>Current time  = </span><span class=\"time\" [innerHTML]=\"time\"></span>\n    </div>\n    </ion-card-content>\n  </ion-card>\n\n  <div *ngIf=\"this.loaded =='init'\">Rendering</div>\n  <ion-card *ngIf= \"this.rendered  =='rendered'\" style=\" height: 40vh;\">\n    \n    <ion-card-content style=\"height:40vh\">\n      <canvas #lineCanvas></canvas>\n    </ion-card-content>\n  </ion-card>\n  \n</ion-content>  ");

/***/ }),

/***/ "./src/app/eth/eth-routing.module.ts":
/*!*******************************************!*\
  !*** ./src/app/eth/eth-routing.module.ts ***!
  \*******************************************/
/*! exports provided: EthPageRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EthPageRoutingModule", function() { return EthPageRoutingModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js");
/* harmony import */ var _eth_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./eth.page */ "./src/app/eth/eth.page.ts");




const routes = [
    {
        path: '',
        component: _eth_page__WEBPACK_IMPORTED_MODULE_3__["EthPage"]
    }
];
let EthPageRoutingModule = class EthPageRoutingModule {
};
EthPageRoutingModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forChild(routes)],
        exports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"]],
    })
], EthPageRoutingModule);



/***/ }),

/***/ "./src/app/eth/eth.module.ts":
/*!***********************************!*\
  !*** ./src/app/eth/eth.module.ts ***!
  \***********************************/
/*! exports provided: EthPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EthPageModule", function() { return EthPageModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");
/* harmony import */ var _eth_routing_module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./eth-routing.module */ "./src/app/eth/eth-routing.module.ts");
/* harmony import */ var _eth_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./eth.page */ "./src/app/eth/eth.page.ts");







let EthPageModule = class EthPageModule {
};
EthPageModule = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicModule"],
            _eth_routing_module__WEBPACK_IMPORTED_MODULE_5__["EthPageRoutingModule"]
        ],
        declarations: [_eth_page__WEBPACK_IMPORTED_MODULE_6__["EthPage"]]
    })
], EthPageModule);



/***/ }),

/***/ "./src/app/eth/eth.page.scss":
/*!***********************************!*\
  !*** ./src/app/eth/eth.page.scss ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("ion-menu-button {\n  color: var(--ion-color-primary);\n}\n\nion-toolbar, ion-header {\n  --min-height: 60px;\n}\n\nion-title, ion-toolbar, ion-header {\n  font-size: 120%;\n  color: white;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZXRoL0M6XFxVc2Vyc1xcTWF4IEJvc2NoXFx0aGVzaXMvc3JjXFxhcHBcXGV0aFxcZXRoLnBhZ2Uuc2NzcyIsInNyYy9hcHAvZXRoL2V0aC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwrQkFBQTtBQ0NKOztBRENFO0VBQ0Usa0JBQUE7QUNFSjs7QURBRztFQUNDLGVBQUE7RUFDQSxZQUFBO0FDR0oiLCJmaWxlIjoic3JjL2FwcC9ldGgvZXRoLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1tZW51LWJ1dHRvbiB7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xyXG4gIH1cclxuICBpb24tdG9vbGJhciwgaW9uLWhlYWRlciB7XHJcbiAgICAtLW1pbi1oZWlnaHQ6IDYwcHg7XHJcbiAgIH1cclxuICAgaW9uLXRpdGxlLCBpb24tdG9vbGJhciwgaW9uLWhlYWRlciB7XHJcbiAgICBmb250LXNpemU6IDEyMCU7XHJcbiAgICBjb2xvcjp3aGl0ZTtcclxuICAgfSIsImlvbi1tZW51LWJ1dHRvbiB7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG59XG5cbmlvbi10b29sYmFyLCBpb24taGVhZGVyIHtcbiAgLS1taW4taGVpZ2h0OiA2MHB4O1xufVxuXG5pb24tdGl0bGUsIGlvbi10b29sYmFyLCBpb24taGVhZGVyIHtcbiAgZm9udC1zaXplOiAxMjAlO1xuICBjb2xvcjogd2hpdGU7XG59Il19 */");

/***/ }),

/***/ "./src/app/eth/eth.page.ts":
/*!*********************************!*\
  !*** ./src/app/eth/eth.page.ts ***!
  \*********************************/
/*! exports provided: EthPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EthPage", function() { return EthPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chart.js */ "./node_modules/chart.js/dist/Chart.js");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ionic_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/storage */ "./node_modules/@ionic/storage/__ivy_ngcc__/fesm2015/ionic-storage.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js");






let EthPage = class EthPage {
    constructor(storage, alertCtrl) {
        this.storage = storage;
        this.alertCtrl = alertCtrl;
        this.loaded = 'init';
        this.predictions = [];
        this.rendered = 'rendered';
        this.hist_time = [];
        this.hist_price = [];
        this.pred_price = [];
        this.pred_time = [];
    }
    load() {
        return new Promise((resolve) => {
            this.storage.get('predictions_eth').then((predictions) => {
                if (predictions != null) {
                    this.predictions = predictions;
                }
                resolve(true);
            });
        });
    }
    ngOnInit() {
        this.ibm_predict();
        this.getprice();
    }
    addPrediction() {
        this.alertCtrl.create({
            header: 'Adding a new Prediction',
            message: 'What is the Prediction?',
            inputs: [
                {
                    type: 'number',
                    name: 'price'
                }
            ],
            buttons: [
                {
                    text: 'Cancel'
                },
                {
                    text: 'Save',
                    handler: (data) => {
                        this.createPrediction(data.price);
                    }
                }
            ]
        }).then((alert) => {
            alert.present();
        });
    }
    createPrediction(price) {
        var options = {
            hour12: false, hour: 'numeric', day: 'numeric', month: 'numeric',
        };
        var now = new Date().toLocaleDateString('en', options);
        var time = new Date().getTime();
        this.predictions.push({
            price: parseInt(price),
            day_month: now,
            timestamp: time,
            type: "Eth"
        });
        console.log(this.predictions);
        this.save();
    }
    save() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            this.hist_time = [];
            this.hist_price = [];
            this.pred_price = [];
            this.pred_time = [];
            yield this.storage.set('predictions_eth', this.predictions);
            yield this.load();
            yield this.get_hist_price();
            yield this.get_chart();
            return;
        });
    }
    get_chart() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            setInterval(() => Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () { this.getprice(); }), 60000);
            this.lineChart = new chart_js__WEBPACK_IMPORTED_MODULE_2__["Chart"](this.lineCanvas.nativeElement, {
                type: "line",
                data: {
                    labels: this.hist_time,
                    datasets: [
                        {
                            label: "Ethereum price",
                            fill: false,
                            lineTension: 0.1,
                            backgroundColor: "#e755ba",
                            borderColor: "#e755ba",
                            borderCapStyle: "butt",
                            borderDash: [],
                            borderDashOffset: 0.0,
                            borderJoinStyle: "miter",
                            pointBorderColor: "#e755ba",
                            pointBackgroundColor: "#e755ba",
                            pointBorderWidth: 1,
                            pointHoverRadius: 5,
                            pointHoverBackgroundColor: "#e755ba",
                            pointHoverBorderColor: "#e755ba",
                            pointHoverBorderWidth: 2,
                            pointRadius: 1,
                            pointHitRadius: 10,
                            data: this.hist_price,
                            spanGaps: false,
                            datalabels: {
                                color: 'black',
                                align: 'end',
                                display: false
                            }
                        }, {
                            label: "Prediction",
                            data: this.pred_price,
                            borderWidth: 2,
                            backgroundColor: "red",
                            borderColor: "red",
                            pointBackgroundColor: "red",
                            pointBorderColor: "red",
                            pointHoverBackgroundColor: "red",
                            pointHoverBorderColor: "red",
                            type: 'scatter',
                            datalabels: {
                                color: 'black',
                                align: 'end',
                                display: false
                            }
                        }
                    ]
                }, options: { maintainAspectRatio: false,
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Ethereum price ($) in 2020'
                    },
                    scales: {
                        xAxes: [{
                                distribution: 'series',
                                display: true,
                                ticks: { fontSize: 10,
                                    maxTicksLimit: 4.1,
                                },
                                scaleLabel: {
                                    display: true,
                                    labelString: "Date",
                                }
                            }],
                        yAxes: [{
                                ticks: {
                                    min: Math.floor((Math.min(...this.hist_price)) / 100) * 100,
                                    max: Math.ceil(Math.max((Math.max(...this.hist_price)), (Math.max(...this.pred_price))) / 100) * 100,
                                    maxTicksLimit: ((Math.ceil(Math.max((Math.max(...this.hist_price)), (Math.max(...this.pred_price))) / 100)) - (Math.floor((Math.min(...this.hist_price)))) / 100) + 2,
                                },
                                gridLines: {
                                    borderDash: [8, 4],
                                    color: "#348632"
                                }
                            }]
                    },
                    legend: {
                        display: true
                    }
                }
            });
            return;
        });
    }
    // async ionViewWillEnter (){
    // }
    ionViewDidEnter() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            yield this.load();
            yield this.get_hist_price();
            yield this.get_chart();
            return;
        });
    }
    get_hist_price() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            var url = "https://api.binance.com/api/v1/klines?symbol=ETHUSDT&interval=1h";
            const res = yield axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url);
            var i;
            var options = {
                hour12: false, hour: 'numeric', day: 'numeric', month: 'numeric',
            };
            for (i = 0; i < res.data.length; i++) {
                this.hist_time.push(new Date(res.data[i][0]).toLocaleDateString('en', options));
                this.hist_price.push(Math.floor(res.data[i][1]));
                this.pred_price.push(0);
                // this.pred_time.push(new Date(res.data[i][0]).toLocaleDateString('en', options))
            }
            var j;
            for (j = 0; j < this.predictions.length; j++) {
                if (this.hist_time.includes(this.predictions[j].day_month)) {
                    this.pred_price[(this.hist_time.indexOf(this.predictions[j].day_month))] = this.predictions[j].price;
                }
            }
            return;
        });
    }
    getprice() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            try {
                var url = "https://api.binance.com/api/v1/klines?symbol=ETHUSDT&interval=1m";
                const res = yield axios__WEBPACK_IMPORTED_MODULE_3___default.a.get(url);
                if (res.data.length != 0) {
                    this.loaded = 'yes';
                }
                else {
                    this.loaded = 'no';
                }
                this.time = new Date(res.data[res.data.length - 1][0]).toLocaleString();
                this.price = Math.floor(res.data[res.data.length - 1][1]);
                return;
            }
            catch (_a) {
                this.loaded = 'no';
                return;
            }
        });
    }
    ibm_predict() {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function* () {
            const apikey = '59eP5YTkCoW_eM8rf93ecP8zu1erXOnKOE9nYuqzTyAU';
            // Paste your Watson Machine Learning service apikey here
            // Use this code as written to get an access token from IBM Cloud REST API
            //
            var url = "https://iam.bluemix.net/oidc/token";
            var IBM_Cloud_IAM_uid = "bx";
            var IBM_Cloud_IAM_pwd = "bx";
            var data = "apikey=" + apikey + "&grant_type=urn:ibm:params:oauth:grant-type:apikey";
            let axiosConfig = {
                headers: { 'Content-Type': 'application/x-www-form-urlencoded',
                    "Access-Control-Allow-Origin": "*",
                    "Authorization": "Basic " + btoa(IBM_Cloud_IAM_uid + ":" + IBM_Cloud_IAM_pwd) },
            };
            var res = yield axios__WEBPACK_IMPORTED_MODULE_3___default.a.post(url, data, axiosConfig);
            console.log(res);
        });
    }
};
EthPage.ctorParameters = () => [
    { type: _ionic_storage__WEBPACK_IMPORTED_MODULE_4__["Storage"] },
    { type: _ionic_angular__WEBPACK_IMPORTED_MODULE_5__["AlertController"] }
];
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])("lineCanvas")
], EthPage.prototype, "lineCanvas", void 0);
EthPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-eth',
        template: Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! raw-loader!./eth.page.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/eth/eth.page.html")).default,
        styles: [Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"])(__webpack_require__(/*! ./eth.page.scss */ "./src/app/eth/eth.page.scss")).default]
    })
], EthPage);



/***/ })

}]);
//# sourceMappingURL=eth-eth-module-es2015.js.map